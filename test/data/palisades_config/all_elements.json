{
    "id": "window",
    "label": "Managed Timber Production and Valuation",
    "targetScript": "invest_natcap.timber.timber",
    "modelName": "timber",
    "localDocURI": "../documentation/managed_timber_production_model.html",
    "height": 300,
    "width": 700,
    "elements": [
        {
            "id":"output_dir",
            "type": "folder",
            "label": "Workspace",
            "required": true,
            "validateAs": {"type": "folder"},
            "args_id": "workspace_dir",
            "defaultValue": "../timber",
            "helpText": "Select a folder to be used as your workspace. If the folder you select does not exist, it will be created for you.<br/><br/>This folder will contain the outputs produced by this model. <b>If outputs already exist in this folder, they will be overwritten</b>."
        },
        {
            "id": "shapefile",
            "args_id": "timber_shape_uri",
            "type": "file",
            "label": "Managed area map",
            "validateAs": {"type": "OGR"},
            "required": true,
            "defaultValue": "../timber/input/plantation.shp",
            "helpText": "A required polygon shapefile that is projected in meters. This shapefile should have polygons that represent the timber parcles and every polygon should have a unique ID under the field 'Parcl_ID'." 
        },
        {
            "id": "attr_table",
            "args_id": "attr_table_uri",
            "type": "file",
            "label": "Plantation production table",
            "required": true,
            "defaultValue": "../timber/input/plant_table.dbf",
            "validateAs": { "type": "DBF",
                            "fieldsExist": ["PRICE", "T", "BCEF", "Parcel_ID", "Parcl_area", "Perc_harv",                                                     "Harv_mass", "Freq_harv", "Maint_cost", "Harv_cost", "Immed_harv"],
                            "restrictions": [{"field": "T",
                                            "validateAs": {"type": "number",
                                                           "allowedValues": {"pattern":"^[0-9]+"}}},
                                            {"field": "Parcel_ID",
                                            "validateAs": {"type": "number",
                                                           "allowedValues": {"pattern":"^[0-9]+"}}},
                                            {"field": "Immed_harv",
                                            "validateAs": {"type": "string",
                                                           "allowedValues":{"pattern":"N|Y|YES|NO", "flag":"ignoreCase"}}},
                                            {"field": "PRICE",
                                            "validateAs": {"type": "number",
                                                           "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}}},
                                            {"field": "BCEF",
                                            "validateAs": {"type": "number",
                                                           "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}}},
                                            {"field": "Parcl_area",
                                            "validateAs": {"type": "number",
                                                           "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}}},
                                            {"field": "Perc_harv",
                                            "validateAs": {"type": "number",
                                                           "allowedValues":{"pattern":"^[0-9]+"}}},
                                            {"field": "Harv_mass",
                                            "validateAs": {"type": "number",
                                                           "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}}},
                                            {"field": "Freq_harv",
                                            "validateAs": {"type": "number",
                                                           "allowedValues":{"pattern":"^[0-9]+"}}},
                                            {"field": "Maint_cost",
                                            "validateAs": {"type": "number",
                                                           "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}}},
                                            {"field": "Harv_cost",
                                            "validateAs": {"type": "number",
                                                           "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}}}
                                            ]
            },
            "helpText": "A dbf table file that has the following columns:<br><b>'Parcel_ID'</b>: Same as timber parcel ID in Manager Area Map. IDs must match the parcel IDs used in the polygon map.  User must select this field as a model input.  <br><b>'Parcl_area'</b>: The area of the timber parcel in hectares.  <br><b>'Perc_harv'</b> : The proportion of the timber parcel area that is harvested each harvest period; units are integer percent.  <br><b>'Harv_mass'</b> : The mass of wood harvested per hectare (in metric tons (Mg) ha^-1) in each harvest period.  <br><b>'Freq_harv'</b> : The frequency of harvest periods, in years, for each parcel.  <br><b>'PRICE'</b> : The marketplace value of the wood harvested from the parcel (^-1). Please see the User Guide for a more detailed description.  <br><b>'Maint_cost'</b> : The annualized cost ha^-1 of maintaining the timber parcel, if any. Please see the User Guide for a more detailed description.  <br><b>'Harve_cost'</b> : The cost (ha^-1) incurred when harvesting Harv_mass.  <br><b>'T'</b> : The number of years from yr_cur or yr_fut that parcel harvests will be valued.  Please see the User Guide for a more detailed description.  <br><b>'Immed_harv'</b> : This attribute answers whether a harvest occurs immediately - whether a harvest occurs in yr_cur, or whether the user is evaluating a forest parcel associated with a future LULC scenario occurring in yr_fut.  Answer yes (entered as YES or Y) or no (entered as No or N) to whether a harvest should be calculated for yr_cur or yr_fut. If yes, then the NPV of harvest in the parcel includes a harvest in yr_cur, otherwise the first harvest accounted for in the parcels NPV occurs Freq_harv years into the into time interval T.  <br><b>'BCEF'</b> : An expansion factor that translates the mass of harvested wood into volume of harvested wood. Please see the User Guide for a more detailed description."
        },    
        {
            "id": "discount",
            "args_id": "market_disc_rate",
            "type": "text",
            "width": 70,
            "label": "Market discount rate (%)",
            "required": true,
            "dataType": "float",
            "validText": "-?([0-9]+)?\\.[0-9]+",
            "defaultValue": "7",
            "helpText" : "The market discount rate reflects societys preference for immediate benefits over future benefits (e.g., would you rather receive $10 today or $10 five years from now?)."
        },
        {
            "id": "sample_hidden",
            "args_id": "hidden_value",
            "type": "hidden",
            "returns": "returned a value!"
        },
        {
            "id": "sample_label",
            "args_id": "sample_label",
            "type": "label",
            "label": "Hello there, this is a label that is supposed to span all columns of the grid in which it is placed.  Please ensure that this is actually the case."
        },
        {
            "id": "sample_dropdown",
            "args_id": "sample_dropdown",
            "type": "dropdown",
            "label": "A Dropdown",
            "options": ["hello", "world"]
        }
    ] 
}
